<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Vaccine efficacy trial design</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
margin-bottom: 0em;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Vaccine efficacy trial design</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(gsDesign)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This article explores a method of approximating a design using the
exact binomial method of <span class="citation">Chan and Bohidar
(1998)</span> by a time-to-event design using the method of <span class="citation">Lachin and Foulkes (1986)</span>. This allows use of
spending functions to derive boundaries for the exact method. The
time-to-event design can not only be used to set boundaries for the
<span class="citation">Chan and Bohidar (1998)</span> method, but to
allow specification of enrollment duration and study duration to
determine enrollment rates and sample size required. This vignette also
illustrates the concept of super-superiority often used in prevention
studies. Finally, since this procedure is new as of November, 2023 we
suggest checks and potential revisions to spending function choices to
optimize design boundaries.</p>
</div>
<div id="parameterization" class="section level2">
<h2>Parameterization</h2>
<p>We begin with the assumption that we will a require a large sample
size due to an endpoint with a small incidence rate. This could apply to
a vaccine study or other prevention study with a relatively small number
of events expected.</p>
<div id="exact-binomial-approach" class="section level3">
<h3>Exact binomial approach</h3>
<p>Paralleling the notation of <span class="citation">Chan and Bohidar
(1998)</span>, we assume <span class="math inline">\(N_C, P_C\)</span>
to be binomial sample size and probability of an event for each
participant assigned to control; for the experimental treatment group,
these are labeled <span class="math inline">\(N_E, P_E\)</span>. Vaccine
efficacy is defined as</p>
<p><span class="math display">\[\pi = 1 - P_E/P_C.\]</span></p>
<p>The parameter <span class="math inline">\(\pi\)</span> is often
labeled as VE for vaccine efficacy. Taking into account the
randomization ratio <span class="math inline">\(r\)</span> (experimental
/ control) the approximate probability that any given event is in the
experimental group is</p>
<p><span class="math display">\[
\begin{aligned}
p &amp;= rP_E/(rP_E+ P_C)\\
  &amp;= r/(r + P_C/P_E)\\
  &amp;= r/(r + (1-\pi)^{-1}).
\end{aligned}
\]</span></p>
<p>As noted, this approximation is dependent on a large sample size and
small probability of events. The above can be inverted to obtain</p>
<p><span class="math display">\[\pi = 1 - \frac{1}{r(1/p-1)}.
\]</span></p>
<p>For our example of interest, we begin with an alternate hypothesis
vaccine efficacy <span class="math inline">\(\pi_1 = 0.7\)</span> and
experimental:control randomization ratio <span class="math inline">\(r=3\)</span>. This converts to an alternate
hypothesis (approximate) probability that any event is in the
experimental group of</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>pi1 <span class="ot">&lt;-</span> .<span class="dv">7</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>ratio <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> ratio <span class="sc">/</span> (ratio <span class="sc">+</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> pi1))</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>p1</span></code></pre></div>
<pre><code>#&gt; [1] 0.4736842</code></pre>
<p>We use the inversion formula to revert this to <span class="math inline">\(\pi_1 = 0.7\)</span></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="dv">1</span> <span class="sc">/</span> (ratio <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">/</span> p1 <span class="sc">-</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 0.7</code></pre>
<p>Letting the null hypothesis vaccine efficacy be <span class="math inline">\(\pi_0 = 0.3\)</span>, our exact binomial null
hypothesis probability that an event is in the experimental group is</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>pi0 <span class="ot">&lt;-</span> .<span class="dv">3</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>p0 <span class="ot">&lt;-</span> ratio <span class="sc">/</span> (ratio <span class="sc">+</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> pi0))</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>p0</span></code></pre></div>
<pre><code>#&gt; [1] 0.6774194</code></pre>
<p>We also translate several vaccine efficacy values to proportion of
events in the experimental group:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">6</span>, .<span class="dv">65</span>, .<span class="dv">7</span>, .<span class="dv">75</span>, .<span class="dv">8</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>prob_experimental <span class="ot">&lt;-</span> ratio <span class="sc">/</span> (ratio <span class="sc">+</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> ve))</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">VE =</span> ve, <span class="st">&quot;P(Experimental)&quot;</span> <span class="ot">=</span> prob_experimental) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">data_row.padding =</span> <span class="fu">px</span>(<span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">2</span>, <span class="at">decimals =</span> <span class="dv">3</span>)</span></code></pre></div>
<div id="dudoxznugp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dudoxznugp table {
font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
#dudoxznugp thead, #dudoxznugp tbody, #dudoxznugp tfoot, #dudoxznugp tr, #dudoxznugp td, #dudoxznugp th {
border-style: none;
}
#dudoxznugp p {
margin: 0;
padding: 0;
}
#dudoxznugp .gt_table {
display: table;
border-collapse: collapse;
line-height: normal;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
font-weight: normal;
font-style: normal;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}
#dudoxznugp .gt_caption {
padding-top: 4px;
padding-bottom: 4px;
}
#dudoxznugp .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}
#dudoxznugp .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 3px;
padding-bottom: 5px;
padding-left: 5px;
padding-right: 5px;
border-top-color: #FFFFFF;
border-top-width: 0;
}
#dudoxznugp .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#dudoxznugp .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#dudoxznugp .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#dudoxznugp .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}
#dudoxznugp .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}
#dudoxznugp .gt_column_spanner_outer:first-child {
padding-left: 0;
}
#dudoxznugp .gt_column_spanner_outer:last-child {
padding-right: 0;
}
#dudoxznugp .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 5px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}
#dudoxznugp .gt_spanner_row {
border-bottom-style: hidden;
}
#dudoxznugp .gt_group_heading {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
text-align: left;
}
#dudoxznugp .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}
#dudoxznugp .gt_from_md > :first-child {
margin-top: 0;
}
#dudoxznugp .gt_from_md > :last-child {
margin-bottom: 0;
}
#dudoxznugp .gt_row {
padding-top: 1px;
padding-bottom: 1px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}
#dudoxznugp .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
}
#dudoxznugp .gt_stub_row_group {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
vertical-align: top;
}
#dudoxznugp .gt_row_group_first td {
border-top-width: 2px;
}
#dudoxznugp .gt_row_group_first th {
border-top-width: 2px;
}
#dudoxznugp .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#dudoxznugp .gt_first_summary_row {
border-top-style: solid;
border-top-color: #D3D3D3;
}
#dudoxznugp .gt_first_summary_row.thick {
border-top-width: 2px;
}
#dudoxznugp .gt_last_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#dudoxznugp .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#dudoxznugp .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}
#dudoxznugp .gt_last_grand_summary_row_top {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: double;
border-bottom-width: 6px;
border-bottom-color: #D3D3D3;
}
#dudoxznugp .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}
#dudoxznugp .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#dudoxznugp .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#dudoxznugp .gt_footnote {
margin: 0px;
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#dudoxznugp .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#dudoxznugp .gt_sourcenote {
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#dudoxznugp .gt_left {
text-align: left;
}
#dudoxznugp .gt_center {
text-align: center;
}
#dudoxznugp .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}
#dudoxznugp .gt_font_normal {
font-weight: normal;
}
#dudoxznugp .gt_font_bold {
font-weight: bold;
}
#dudoxznugp .gt_font_italic {
font-style: italic;
}
#dudoxznugp .gt_super {
font-size: 65%;
}
#dudoxznugp .gt_footnote_marks {
font-size: 75%;
vertical-align: 0.4em;
position: initial;
}
#dudoxznugp .gt_asterisk {
font-size: 100%;
vertical-align: 0;
}
#dudoxznugp .gt_indent_1 {
text-indent: 5px;
}
#dudoxznugp .gt_indent_2 {
text-indent: 10px;
}
#dudoxznugp .gt_indent_3 {
text-indent: 15px;
}
#dudoxznugp .gt_indent_4 {
text-indent: 20px;
}
#dudoxznugp .gt_indent_5 {
text-indent: 25px;
}
#dudoxznugp .katex-display {
display: inline-flex !important;
margin-bottom: 0.75em !important;
}
#dudoxznugp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="VE">VE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="P(Experimental)">P(Experimental)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="VE" class="gt_row gt_right">0.50</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.600</td></tr>
    <tr><td headers="VE" class="gt_row gt_right">0.60</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.545</td></tr>
    <tr><td headers="VE" class="gt_row gt_right">0.65</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.512</td></tr>
    <tr><td headers="VE" class="gt_row gt_right">0.70</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.474</td></tr>
    <tr><td headers="VE" class="gt_row gt_right">0.75</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.429</td></tr>
    <tr><td headers="VE" class="gt_row gt_right">0.80</td>
<td headers="P(Experimental)" class="gt_row gt_right">0.375</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Chapter 12 of <span class="citation">Jennison and Turnbull
(2000)</span> walks through how to design and analyze such a study using
a fixed or group sequential design. The time-to-event approximation
provides an initial approximation to computing bounds; more importantly,
it provides sample size and study duration approximations that are not
given by the Jennison and Turnbull approach.</p>
</div>
</div>
<div id="the-time-to-event-approach" class="section level2">
<h2>The time-to-event approach</h2>
<p>For a time-to-event formulation with exponential failure rates <span class="math inline">\(\lambda_C\)</span> for control and <span class="math inline">\(\lambda_E\)</span> for experimental group assigned
participants, we would define</p>
<p><span class="math display">\[\pi = 1 - \lambda_E /
\lambda_C\]</span></p>
<p>which is 1 minus the hazard ratio often used in time-to-event
studies. In the following we examine how closely the time-to-event
method using asymptotic distributional assumptions can approximate an
appropriate exact binomial design. We will also define a planned number
of events at each of <span class="math inline">\(K\)</span> planned
analyses by <span class="math inline">\(D_k, 1\le k\le K\)</span>.</p>
</div>
<div id="generating-a-design" class="section level2">
<h2>Generating a design</h2>
<p>We begin by specifying parameters. The <code>alpha</code> and
<code>beta</code> parameters will not be met exactly due to the discrete
group sequential probability calculations performed. The current version
includes only designs that use non-binding futility bounds or no
futility bounds. The design is generated by first using asymptotic
theory for a time-to-event design with specified spending functions.
This design is then adapted to a design using the exact binomial method
of <span class="citation">Chan and Bohidar (1998)</span>. The
randomization ratio (experimental/control) was assumed to be 3:1 as in
the <span class="citation">Logunov et al. (2021)</span> trial.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Type I error</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>beta <span class="ot">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Type II error (1 - power)</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># number of analyses in group sequential design</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>timing <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">45</span>, .<span class="dv">7</span>) <span class="co"># Relative timing of interim analyses compared to final</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>sfu <span class="ot">&lt;-</span> sfHSD <span class="co"># Efficacy bound spending function (Hwang-Shih-DeCani)</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>sfupar <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">3</span> <span class="co"># Parameter for efficacy spending function</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>sfl <span class="ot">&lt;-</span> sfHSD <span class="co"># Futility bound spending function (Hwang-Shih-DeCani)</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>sflpar <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">3</span> <span class="co"># Futility bound spending function parameter</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>timename <span class="ot">&lt;-</span> <span class="st">&quot;Month&quot;</span> <span class="co"># Time unit</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>failRate <span class="ot">&lt;-</span> .<span class="dv">002</span> <span class="co"># Exponential failure rate</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>dropoutRate <span class="ot">&lt;-</span> .<span class="dv">0001</span> <span class="co"># Exponential dropout rate</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>enrollDuration <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="co"># Enrollment duration</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>trialDuration <span class="ot">&lt;-</span> <span class="dv">24</span> <span class="co"># Planned trial duration</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>VE1 <span class="ot">&lt;-</span> .<span class="dv">7</span> <span class="co"># Alternate hypothesis vaccine efficacy</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>VE0 <span class="ot">&lt;-</span> .<span class="dv">3</span> <span class="co"># Null hypothesis vaccine efficacy</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>ratio <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># Experimental/Control enrollment ratio</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>test.type <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="co"># 1 for one-sided, 4 for non-binding futility</span></span></code></pre></div>
<div id="the-time-to-event-design" class="section level3">
<h3>The time-to-event design</h3>
<p>Now we generate the design. If resulting alpha and beta do not
satisfy requirements, adjust parameters above until a satisfactory
result is obtained.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Derive Group Sequential Design</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># This determines final sample size</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">gsSurv</span>(</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="at">k =</span> k, <span class="at">test.type =</span> test.type, <span class="at">alpha =</span> alpha, <span class="at">beta =</span> beta, <span class="at">timing =</span> timing,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="at">sfu =</span> sfu, <span class="at">sfupar =</span> sfupar, <span class="at">sfl =</span> sfl, <span class="at">sflpar =</span> sflpar,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="at">lambdaC =</span> failRate, <span class="at">eta =</span> dropoutRate,</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="co"># Translate vaccine efficacy to HR</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>  <span class="at">hr =</span> <span class="dv">1</span> <span class="sc">-</span> VE1, <span class="at">hr0 =</span> <span class="dv">1</span> <span class="sc">-</span> VE0,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  <span class="at">R =</span> enrollDuration, <span class="at">T =</span> trialDuration,</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>  <span class="at">minfup =</span> trialDuration <span class="sc">-</span> enrollDuration, <span class="at">ratio =</span> ratio</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>)</span></code></pre></div>
<p>Now we convert this to a design with integer event counts at
analyses. This is achieved by rounding interim analysis event counts
from the above design and rounding up the final analysis event count.
This will result in a slight change in event fractions at interim
analyses as well as a slight change from the targeted 90% power. We now
explain the rationale behind the spending function choices. Recall that
the hazard ratio (HR) is 1 minus the VE. The <code>~HR at bound</code>
represents the approximate hazard ratio required to cross a bound. Thus,
small HR’s at the interim analyses along with small cumulative <span class="math inline">\(\alpha\)</span>-spending suggest crossing an
interim efficacy bound would provide a result strong enough to
potentially justify the new treatment. The hazard ratio of ~0.69 (VE ~
0.31) for the interim 1 futility bound mean that the efficacy trend
would be essentially no better than the null hypothesis if the futility
bound were crossed. The second analysis futility bound with approximate
VE of 0.5 would be worth discussion with a data monitoring committee as
well as other planners for the trial; a custom spending function could
be used to set both the first and second interim bounds to desired
levels.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>xx <span class="ot">&lt;-</span> <span class="fu">toInteger</span>(x)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">gsBoundSummary</span>(xx,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">tdigits =</span> <span class="dv">1</span>, <span class="at">logdelta =</span> <span class="cn">TRUE</span>, <span class="at">deltaname =</span> <span class="st">&quot;HR&quot;</span>, <span class="at">Nname =</span> <span class="st">&quot;Events&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="at">exclude =</span> <span class="fu">c</span>(<span class="st">&quot;B-value&quot;</span>, <span class="st">&quot;CP&quot;</span>, <span class="st">&quot;CP H1&quot;</span>, <span class="st">&quot;PP&quot;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Initial group sequential approximation&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Integer event counts at analyses&quot;</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">data_row.padding =</span> <span class="fu">px</span>(<span class="dv">1</span>))</span></code></pre></div>
<div id="yowhyeawiw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yowhyeawiw table {
font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
#yowhyeawiw thead, #yowhyeawiw tbody, #yowhyeawiw tfoot, #yowhyeawiw tr, #yowhyeawiw td, #yowhyeawiw th {
border-style: none;
}
#yowhyeawiw p {
margin: 0;
padding: 0;
}
#yowhyeawiw .gt_table {
display: table;
border-collapse: collapse;
line-height: normal;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
font-weight: normal;
font-style: normal;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}
#yowhyeawiw .gt_caption {
padding-top: 4px;
padding-bottom: 4px;
}
#yowhyeawiw .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}
#yowhyeawiw .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 3px;
padding-bottom: 5px;
padding-left: 5px;
padding-right: 5px;
border-top-color: #FFFFFF;
border-top-width: 0;
}
#yowhyeawiw .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#yowhyeawiw .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#yowhyeawiw .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#yowhyeawiw .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}
#yowhyeawiw .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}
#yowhyeawiw .gt_column_spanner_outer:first-child {
padding-left: 0;
}
#yowhyeawiw .gt_column_spanner_outer:last-child {
padding-right: 0;
}
#yowhyeawiw .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 5px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}
#yowhyeawiw .gt_spanner_row {
border-bottom-style: hidden;
}
#yowhyeawiw .gt_group_heading {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
text-align: left;
}
#yowhyeawiw .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}
#yowhyeawiw .gt_from_md > :first-child {
margin-top: 0;
}
#yowhyeawiw .gt_from_md > :last-child {
margin-bottom: 0;
}
#yowhyeawiw .gt_row {
padding-top: 1px;
padding-bottom: 1px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}
#yowhyeawiw .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
}
#yowhyeawiw .gt_stub_row_group {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
vertical-align: top;
}
#yowhyeawiw .gt_row_group_first td {
border-top-width: 2px;
}
#yowhyeawiw .gt_row_group_first th {
border-top-width: 2px;
}
#yowhyeawiw .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#yowhyeawiw .gt_first_summary_row {
border-top-style: solid;
border-top-color: #D3D3D3;
}
#yowhyeawiw .gt_first_summary_row.thick {
border-top-width: 2px;
}
#yowhyeawiw .gt_last_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#yowhyeawiw .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#yowhyeawiw .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}
#yowhyeawiw .gt_last_grand_summary_row_top {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: double;
border-bottom-width: 6px;
border-bottom-color: #D3D3D3;
}
#yowhyeawiw .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}
#yowhyeawiw .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#yowhyeawiw .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#yowhyeawiw .gt_footnote {
margin: 0px;
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#yowhyeawiw .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#yowhyeawiw .gt_sourcenote {
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#yowhyeawiw .gt_left {
text-align: left;
}
#yowhyeawiw .gt_center {
text-align: center;
}
#yowhyeawiw .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}
#yowhyeawiw .gt_font_normal {
font-weight: normal;
}
#yowhyeawiw .gt_font_bold {
font-weight: bold;
}
#yowhyeawiw .gt_font_italic {
font-style: italic;
}
#yowhyeawiw .gt_super {
font-size: 65%;
}
#yowhyeawiw .gt_footnote_marks {
font-size: 75%;
vertical-align: 0.4em;
position: initial;
}
#yowhyeawiw .gt_asterisk {
font-size: 100%;
vertical-align: 0;
}
#yowhyeawiw .gt_indent_1 {
text-indent: 5px;
}
#yowhyeawiw .gt_indent_2 {
text-indent: 10px;
}
#yowhyeawiw .gt_indent_3 {
text-indent: 15px;
}
#yowhyeawiw .gt_indent_4 {
text-indent: 20px;
}
#yowhyeawiw .gt_indent_5 {
text-indent: 25px;
}
#yowhyeawiw .katex-display {
display: inline-flex !important;
margin-bottom: 0.75em !important;
}
#yowhyeawiw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style>Initial group sequential approximation</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Integer event counts at analyses</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Value">Value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Analysis" class="gt_row gt_left">IA 1: 44%</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.6864</td>
<td headers="Futility" class="gt_row gt_right">0.0424</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.4831</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 30</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.2255</td>
<td headers="Futility" class="gt_row gt_right">0.6876</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Month: 12.8</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.0144</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0036</td>
<td headers="Futility" class="gt_row gt_right">0.5169</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.3231</td>
<td headers="Futility" class="gt_row gt_right">0.0144</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">IA 2: 69%</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.4494</td>
<td headers="Futility" class="gt_row gt_right">0.9143</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0072</td>
<td headers="Futility" class="gt_row gt_right">0.1803</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 47</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.3067</td>
<td headers="Futility" class="gt_row gt_right">0.5144</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Month: 17.9</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0055</td>
<td headers="Futility" class="gt_row gt_right">0.0220</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0091</td>
<td headers="Futility" class="gt_row gt_right">0.8287</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.6455</td>
<td headers="Futility" class="gt_row gt_right">0.0364</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Final</td>
<td headers="Value" class="gt_row gt_left">Z</td>
<td headers="Efficacy" class="gt_row gt_right">2.0296</td>
<td headers="Futility" class="gt_row gt_right">2.0296</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 3606</td>
<td headers="Value" class="gt_row gt_left">p (1-sided)</td>
<td headers="Efficacy" class="gt_row gt_right">0.0212</td>
<td headers="Futility" class="gt_row gt_right">0.0212</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Events: 68</td>
<td headers="Value" class="gt_row gt_left">~HR at bound</td>
<td headers="Efficacy" class="gt_row gt_right">0.3965</td>
<td headers="Futility" class="gt_row gt_right">0.3965</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left">Month: 24.2</td>
<td headers="Value" class="gt_row gt_left">Spending</td>
<td headers="Efficacy" class="gt_row gt_right">0.0159</td>
<td headers="Futility" class="gt_row gt_right">0.0636</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.7</td>
<td headers="Efficacy" class="gt_row gt_right">0.0239</td>
<td headers="Futility" class="gt_row gt_right">0.9761</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_left"></td>
<td headers="Value" class="gt_row gt_left">P(Cross) if HR=0.3</td>
<td headers="Efficacy" class="gt_row gt_right">0.9022</td>
<td headers="Futility" class="gt_row gt_right">0.0978</td></tr>
  </tbody>
  
  
</table>
</div>
<p>A textual summary for the design is:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">summary</span>(xx, <span class="at">timeunit =</span> <span class="st">&quot;months&quot;</span>))</span></code></pre></div>
<p>Asymmetric two-sided group sequential design with non-binding
futility bound, 3 analyses, time-to-event outcome with sample size 3606
and 68 events required, 90 percent power, 2.5 percent (1-sided) Type I
error to detect a hazard ratio of 0.3 with a null hypothesis hazard
ratio of 0.7. Enrollment and total study durations are assumed to be 8
and 24.2 months, respectively. Efficacy bounds derived using a
Hwang-Shih-DeCani spending function with gamma = -3. Futility bounds
derived using a Hwang-Shih-DeCani spending function with gamma = -3.</p>
</div>
</div>
<div id="converting-to-an-exact-binomial-design" class="section level2">
<h2>Converting to an exact binomial design</h2>
<p>We now convert this to an exact binomial design. The bound counts are
described in this initial table displayed. <code>N</code> is the total
event count, <code>a</code> the maximum number of events in the
experimental group to cross the efficacy bound. For example, if 12 or
fewer of 30 events at interim 1 are in the experimental group the
efficacy bound has been crossed. The futility bound is in
<code>b</code>; at the first interim, if 21 or more of 30 total events
are in the experimental group then the futility bound would be crossed
and the alternate hypothesis could be rejected. The second and third
tables below give probabilities of crossing the upper (futility) and
lower (efficacy) bounds under the null (<code>theta</code> = 0.6774) and
alternate (<code>theta</code> = 0.4737) hypotheses, respectively; these
calculations are done under the exact binomial distribution
assumptions.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>xb <span class="ot">&lt;-</span> <span class="fu">toBinomialExact</span>(x)</span></code></pre></div>
<div id="combined-summary-table" class="section level3">
<h3>Combined summary table</h3>
<p>We produce a summary table. Code for this is provided in the R
markdown for this vignette provided with the package. This combines
information from the time-to-event design for calendar timing of
analyses (Time) and expected sample size at each analysis (N) along with
bounds and operating characteristics for the design.</p>
<div id="qbqhcexbaz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qbqhcexbaz table {
font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
#qbqhcexbaz thead, #qbqhcexbaz tbody, #qbqhcexbaz tfoot, #qbqhcexbaz tr, #qbqhcexbaz td, #qbqhcexbaz th {
border-style: none;
}
#qbqhcexbaz p {
margin: 0;
padding: 0;
}
#qbqhcexbaz .gt_table {
display: table;
border-collapse: collapse;
line-height: normal;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
font-weight: normal;
font-style: normal;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}
#qbqhcexbaz .gt_caption {
padding-top: 4px;
padding-bottom: 4px;
}
#qbqhcexbaz .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}
#qbqhcexbaz .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 3px;
padding-bottom: 5px;
padding-left: 5px;
padding-right: 5px;
border-top-color: #FFFFFF;
border-top-width: 0;
}
#qbqhcexbaz .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#qbqhcexbaz .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qbqhcexbaz .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#qbqhcexbaz .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}
#qbqhcexbaz .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}
#qbqhcexbaz .gt_column_spanner_outer:first-child {
padding-left: 0;
}
#qbqhcexbaz .gt_column_spanner_outer:last-child {
padding-right: 0;
}
#qbqhcexbaz .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 5px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}
#qbqhcexbaz .gt_spanner_row {
border-bottom-style: hidden;
}
#qbqhcexbaz .gt_group_heading {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
text-align: left;
}
#qbqhcexbaz .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}
#qbqhcexbaz .gt_from_md > :first-child {
margin-top: 0;
}
#qbqhcexbaz .gt_from_md > :last-child {
margin-bottom: 0;
}
#qbqhcexbaz .gt_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}
#qbqhcexbaz .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
}
#qbqhcexbaz .gt_stub_row_group {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
vertical-align: top;
}
#qbqhcexbaz .gt_row_group_first td {
border-top-width: 2px;
}
#qbqhcexbaz .gt_row_group_first th {
border-top-width: 2px;
}
#qbqhcexbaz .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#qbqhcexbaz .gt_first_summary_row {
border-top-style: solid;
border-top-color: #D3D3D3;
}
#qbqhcexbaz .gt_first_summary_row.thick {
border-top-width: 2px;
}
#qbqhcexbaz .gt_last_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qbqhcexbaz .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#qbqhcexbaz .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}
#qbqhcexbaz .gt_last_grand_summary_row_top {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: double;
border-bottom-width: 6px;
border-bottom-color: #D3D3D3;
}
#qbqhcexbaz .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}
#qbqhcexbaz .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qbqhcexbaz .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#qbqhcexbaz .gt_footnote {
margin: 0px;
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#qbqhcexbaz .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#qbqhcexbaz .gt_sourcenote {
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#qbqhcexbaz .gt_left {
text-align: left;
}
#qbqhcexbaz .gt_center {
text-align: center;
}
#qbqhcexbaz .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}
#qbqhcexbaz .gt_font_normal {
font-weight: normal;
}
#qbqhcexbaz .gt_font_bold {
font-weight: bold;
}
#qbqhcexbaz .gt_font_italic {
font-style: italic;
}
#qbqhcexbaz .gt_super {
font-size: 65%;
}
#qbqhcexbaz .gt_footnote_marks {
font-size: 75%;
vertical-align: 0.4em;
position: initial;
}
#qbqhcexbaz .gt_asterisk {
font-size: 100%;
vertical-align: 0;
}
#qbqhcexbaz .gt_indent_1 {
text-indent: 5px;
}
#qbqhcexbaz .gt_indent_2 {
text-indent: 10px;
}
#qbqhcexbaz .gt_indent_3 {
text-indent: 15px;
}
#qbqhcexbaz .gt_indent_4 {
text-indent: 20px;
}
#qbqhcexbaz .gt_indent_5 {
text-indent: 25px;
}
#qbqhcexbaz .katex-display {
display: inline-flex !important;
margin-bottom: 0.75em !important;
}
#qbqhcexbaz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="16" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Design Bounds and Operating Characteristics</td>
    </tr>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Time">Time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="N">N</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Cases">Cases</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="cases">
        <div class="gt_column_spanner">Experimental Cases at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="vebound">
        <div class="gt_column_spanner">Vaccine Efficacy at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="spend">
        <div class="gt_column_spanner">Error Spending<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="6" scope="colgroup" id="power">
        <div class="gt_column_spanner">Power by Vaccine Efficacy<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span></div>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Success">Success</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="alpha">alpha<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="beta">beta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a50%">50%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a60%">60%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a65%">65%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a70%">70%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a75%">75%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a80%">80%</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Analysis" class="gt_row gt_right">1</td>
<td headers="Time" class="gt_row gt_right">12.9</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">30</td>
<td headers="Success" class="gt_row gt_right">12</td>
<td headers="Futility" class="gt_row gt_right">21</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.78</td>
<td headers="ve_futility" class="gt_row gt_right">0.22</td>
<td headers="alpha" class="gt_row gt_right">0.0016</td>
<td headers="beta" class="gt_row gt_right">0.0103</td>
<td headers="50%" class="gt_row gt_right">0.02</td>
<td headers="60%" class="gt_row gt_right">0.08</td>
<td headers="65%" class="gt_row gt_right">0.15</td>
<td headers="70%" class="gt_row gt_right">0.27</td>
<td headers="75%" class="gt_row gt_right">0.45</td>
<td headers="80%" class="gt_row gt_right">0.69</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_right">2</td>
<td headers="Time" class="gt_row gt_right">17.9</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">47</td>
<td headers="Success" class="gt_row gt_right">23</td>
<td headers="Futility" class="gt_row gt_right">30</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.68</td>
<td headers="ve_futility" class="gt_row gt_right">0.41</td>
<td headers="alpha" class="gt_row gt_right">0.0064</td>
<td headers="beta" class="gt_row gt_right">0.0223</td>
<td headers="50%" class="gt_row gt_right">0.09</td>
<td headers="60%" class="gt_row gt_right">0.27</td>
<td headers="65%" class="gt_row gt_right">0.44</td>
<td headers="70%" class="gt_row gt_right">0.65</td>
<td headers="75%" class="gt_row gt_right">0.84</td>
<td headers="80%" class="gt_row gt_right">0.96</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_right">3</td>
<td headers="Time" class="gt_row gt_right">24.0</td>
<td headers="N" class="gt_row gt_right">3602</td>
<td headers="Cases" class="gt_row gt_right">68</td>
<td headers="Success" class="gt_row gt_right">37</td>
<td headers="Futility" class="gt_row gt_right">38</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.60</td>
<td headers="ve_futility" class="gt_row gt_right">0.58</td>
<td headers="alpha" class="gt_row gt_right">0.0174</td>
<td headers="beta" class="gt_row gt_right">0.0994</td>
<td headers="50%" class="gt_row gt_right">0.21</td>
<td headers="60%" class="gt_row gt_right">0.54</td>
<td headers="65%" class="gt_row gt_right">0.74</td>
<td headers="70%" class="gt_row gt_right">0.90</td>
<td headers="75%" class="gt_row gt_right">0.98</td>
<td headers="80%" class="gt_row gt_right">1.00</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="16"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Experimental case counts to cross between success and futility counts do not stop trial</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Exact vaccine efficacy required to cross bound</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Cumulative spending at each analysis</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Cumulative power at each analysis by underlying vaccine efficacy</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> alpha-spending for efficacy ignores non-binding futility bound</td>
    </tr>
  </tfoot>
</table>
</div>
<p>The initial approximation of bounds for the exact binomial design was
generated from the time-to-event design as follows. First, we computed
nominal p-value 1-sided bounds under the null hypothesis for the
efficacy bounds using the normal approximation that the time-to-event
design used:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>efficacyNominalPValue <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(<span class="sc">-</span>xx<span class="sc">$</span>upper<span class="sc">$</span>bound)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>efficacyNominalPValue</span></code></pre></div>
<pre><code>#&gt; [1] 0.003610924 0.007155713 0.021200261</code></pre>
<p>Then we took the inverse binomial distribution for these p-values
assuming the targeted total number of cases to obtain:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">qbinom</span>(<span class="at">p =</span> efficacyNominalPValue, <span class="at">size =</span> xx<span class="sc">$</span>n.I, <span class="at">prob =</span> p0) <span class="sc">-</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>#&gt; [1] 12 23 37</code></pre>
<p>This is actually the same as the final bounds computed above:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>xb<span class="sc">$</span>lower<span class="sc">$</span>bound</span></code></pre></div>
<pre><code>#&gt; [1] 12 23 37</code></pre>
<p>This and the initial approximation for the futility bound are
returned from <code>toBinomialExact()</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>xb<span class="sc">$</span>init_approx<span class="sc">$</span>a</span></code></pre></div>
<pre><code>#&gt; [1] 12 23 37</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>xb<span class="sc">$</span>init_approx<span class="sc">$</span>b</span></code></pre></div>
<pre><code>#&gt; [1] 20 29 38</code></pre>
<p>For the futility bound, only a slight adjustment was required for the
final bound:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>xb<span class="sc">$</span>upper<span class="sc">$</span>bound</span></code></pre></div>
<pre><code>#&gt; [1] 21 30 38</code></pre>
<p>The vaccine efficacy at bounds should be checked to see if the
evidence is convincing enough to be accepted as a clinically relevant
benefit in addition to statistical benefit (efficacy bounds) or a less
than relevant benefit for futility bounds.</p>
</div>
<div id="checking-design-properties" class="section level3">
<h3>Checking design properties</h3>
<p>Next, we look at <span class="math inline">\(\alpha\)</span>- and
<span class="math inline">\(\beta\)</span>-spending for the
time-to-event design to compare to the exact bound restricted by the
discrete possible counts at bounds. For both <span class="math inline">\(\alpha\)</span>- and <span class="math inline">\(\beta\)</span>-spending, the exact binomial design
has no more spending at each analysis than allowed by each spending
function. We also confirm that changing any of the exact bounds by 1
exceeds the targeting spending.</p>
<div id="alpha-spending" class="section level4">
<h4><span class="math inline">\(\alpha\)</span>-spending</h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Exact design cumulative alpha-spending at efficacy bounds</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co"># (non-binding)</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>nb <span class="ot">&lt;-</span> <span class="fu">gsBinomialExact</span>(<span class="at">k =</span> xb<span class="sc">$</span>k, <span class="at">theta =</span> xb<span class="sc">$</span>theta, <span class="at">n.I =</span> xb<span class="sc">$</span>n.I, <span class="at">b=</span> xb<span class="sc">$</span>n.I <span class="sc">+</span> <span class="dv">1</span>, <span class="at">a =</span> xb<span class="sc">$</span>lower<span class="sc">$</span>bound)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="fu">cumsum</span>(nb<span class="sc">$</span>lower<span class="sc">$</span>prob[,<span class="dv">1</span>])</span></code></pre></div>
<pre><code>#&gt; Analysis  1 Analysis  2 Analysis  3 
#&gt; 0.001619438 0.006447739 0.017397214</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># Targeted alpha-spending</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>xx<span class="sc">$</span>upper<span class="sc">$</span><span class="fu">sf</span>(alpha, <span class="at">t =</span> xx<span class="sc">$</span>timing, xx<span class="sc">$</span>upper<span class="sc">$</span>param)<span class="sc">$</span>spend</span></code></pre></div>
<pre><code>#&gt; [1] 0.003610924 0.009107476 0.025000000</code></pre>
<p>Above we see the achieved <span class="math inline">\(\alpha\)</span>-spending ignoring the futility
bound is controlled at the targeted level at each analysis; because of
the exact bound, control is below the target. For this particular
example, we show below that increasing any efficacy bound by 1 not only
increases above the targeted cumulative spend compared to above at each
analysis (diagonal elements), but also exceeds the targeted total spend
of 0.025 at the final analysis (final column). The latter property will
not always hold. Choosing your spending function carefully (in this
case, using the spending function parameter) to ensure cumulative
spending for the exact design is close to the targeted <span class="math inline">\(\alpha\)</span> is worth careful examination. For
this case, choosing the Hwang-Shih-DeCani efficacy spending parameter as
<span class="math inline">\(\gamma=-4\)</span> instead of <span class="math inline">\(\gamma=-3\)</span> second property would not
hold.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Check that increasing any bound goes above cumulative spend</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>excess_alpha_spend <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> nb<span class="sc">$</span>k, <span class="at">ncol=</span>nb<span class="sc">$</span>k)</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>xb<span class="sc">$</span>k){</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>  a <span class="ot">&lt;-</span> xb<span class="sc">$</span>lower<span class="sc">$</span>bound</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>  a[i] <span class="ot">&lt;-</span> a[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>  excess_alpha_spend[i,] <span class="ot">&lt;-</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>    <span class="fu">cumsum</span>(<span class="fu">gsBinomialExact</span>(<span class="at">k =</span> xb<span class="sc">$</span>k, <span class="at">theta =</span> xb<span class="sc">$</span>theta, <span class="at">n.I =</span> xb<span class="sc">$</span>n.I, <span class="at">b=</span> xb<span class="sc">$</span>n.I <span class="sc">+</span> <span class="dv">1</span>, <span class="at">a =</span> a)<span class="sc">$</span>lower<span class="sc">$</span>prob[,<span class="dv">1</span>])</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a>}</span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a>excess_alpha_spend</span></code></pre></div>
<pre><code>#&gt;             [,1]        [,2]       [,3]
#&gt; [1,] 0.004979222 0.008826964 0.01933025
#&gt; [2,] 0.001619438 0.013174419 0.02171228
#&gt; [3,] 0.001619438 0.006447739 0.02856667</code></pre>
</div>
<div id="beta-spending" class="section level4">
<h4><span class="math inline">\(\beta\)</span>-spending</h4>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co"># Cumulative beta-spending for exact design</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="fu">cumsum</span>(xb<span class="sc">$</span>upper<span class="sc">$</span>prob[,<span class="dv">2</span>])</span></code></pre></div>
<pre><code>#&gt; Analysis  1 Analysis  2 Analysis  3 
#&gt;  0.01033516  0.02225609  0.09941943</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co"># Targeted beta-spending</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>xx<span class="sc">$</span>lower<span class="sc">$</span><span class="fu">sf</span>(beta, <span class="at">t =</span> xx<span class="sc">$</span>timing, xx<span class="sc">$</span>lower<span class="sc">$</span>param)<span class="sc">$</span>spend</span></code></pre></div>
<pre><code>#&gt; [1] 0.0144437 0.0364299 0.1000000</code></pre>
<p>Since the futility bound at the final analysis is only 1 plus the
efficacy bound, it cannot be lowered in the following. However, we see
that changing either interim futility bound by 1 would exceed targeted
interim spending (diagonal elements) and total Type II error spending
(third column). Again, the spending function had to be carefully chosen
to ensure the second of these properties; e.g., with the
O’Brien-Flemining-like spending function the second property did not
hold.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co"># Check that increasing any bound goes above cumulative spend</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>excess_beta_spend <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> nb<span class="sc">$</span>k <span class="sc">-</span> <span class="dv">1</span>, <span class="at">ncol=</span>nb<span class="sc">$</span>k)</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(xb<span class="sc">$</span>k <span class="sc">-</span> <span class="dv">1</span>)){</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  b <span class="ot">&lt;-</span> xb<span class="sc">$</span>upper<span class="sc">$</span>bound</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  b[i] <span class="ot">&lt;-</span> b[i] <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>  excess_beta_spend[i,] <span class="ot">&lt;-</span></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>    <span class="fu">cumsum</span>(<span class="fu">as.numeric</span>(<span class="fu">gsBinomialExact</span>(<span class="at">k =</span> xb<span class="sc">$</span>k, <span class="at">theta =</span> xb<span class="sc">$</span>theta, <span class="at">n.I =</span> xb<span class="sc">$</span>n.I, <span class="at">b =</span> b, <span class="at">a =</span> xb<span class="sc">$</span>lower<span class="sc">$</span>bound)<span class="sc">$</span>upper<span class="sc">$</span>prob[,<span class="dv">2</span>]))</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a>}</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a>excess_beta_spend</span></code></pre></div>
<pre><code>#&gt;            [,1]       [,2]      [,3]
#&gt; [1,] 0.02618462 0.03428681 0.1059802
#&gt; [2,] 0.01033516 0.03746257 0.1034467</code></pre>
</div>
<div id="bound-update-at-time-of-analysis-for-example-2" class="section level4">
<h4>Bound update at time of analysis for example 2</h4>
<p>We now use the second interim analysis outcome from the SPUTNIK trial
to show how to update bounds from above when event counts differ from
planned. The first database was on November 18, 2020 and included 20
endpoints. The second database lock with 78 endpoint cases was one week
later on November 24, 2020. These are slightly different than the
targeted event counts above and bounds must be updated using the
spending functions for the trial based on the altered information
fraction compared to plan; see table below. At the time of analysis of
78 endpoint events, 16 were in the experimental group, comfortably
crossing the efficacy bound requiring 44 or fewer experimental events.
Given the rapid accrual of endpoints, the futility bound would likely
have been irrelevant for the first interim. Since Type I error assumed a
non-binding bound, the first analysis could be ignored; i.e., since it
was non-binding the futility bound could be ignored for decision-making
purposes without inflating Type I error. The VE = -0.33 at the futility
bound favored placebo. Since we have overrun the targeted event count at
the second analysis we exceed the targeted power and never reach the
allowed <span class="math inline">\(\beta\)</span>-spending for Type II
error. Note that for this table, the expected sample size and calendar
timing are no longer needed.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>ebUpdate <span class="ot">&lt;-</span> <span class="fu">toBinomialExact</span>(xx, <span class="at">observedEvents =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">78</span>))</span></code></pre></div>
<p>We hide the code to produce the table; this is available in package
vignette code.</p>
<div id="qokuvfeczq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qokuvfeczq table {
font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
#qokuvfeczq thead, #qokuvfeczq tbody, #qokuvfeczq tfoot, #qokuvfeczq tr, #qokuvfeczq td, #qokuvfeczq th {
border-style: none;
}
#qokuvfeczq p {
margin: 0;
padding: 0;
}
#qokuvfeczq .gt_table {
display: table;
border-collapse: collapse;
line-height: normal;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
font-weight: normal;
font-style: normal;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}
#qokuvfeczq .gt_caption {
padding-top: 4px;
padding-bottom: 4px;
}
#qokuvfeczq .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}
#qokuvfeczq .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 3px;
padding-bottom: 5px;
padding-left: 5px;
padding-right: 5px;
border-top-color: #FFFFFF;
border-top-width: 0;
}
#qokuvfeczq .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#qokuvfeczq .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qokuvfeczq .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}
#qokuvfeczq .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}
#qokuvfeczq .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}
#qokuvfeczq .gt_column_spanner_outer:first-child {
padding-left: 0;
}
#qokuvfeczq .gt_column_spanner_outer:last-child {
padding-right: 0;
}
#qokuvfeczq .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 5px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}
#qokuvfeczq .gt_spanner_row {
border-bottom-style: hidden;
}
#qokuvfeczq .gt_group_heading {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
text-align: left;
}
#qokuvfeczq .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}
#qokuvfeczq .gt_from_md > :first-child {
margin-top: 0;
}
#qokuvfeczq .gt_from_md > :last-child {
margin-bottom: 0;
}
#qokuvfeczq .gt_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}
#qokuvfeczq .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
}
#qokuvfeczq .gt_stub_row_group {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 5px;
padding-right: 5px;
vertical-align: top;
}
#qokuvfeczq .gt_row_group_first td {
border-top-width: 2px;
}
#qokuvfeczq .gt_row_group_first th {
border-top-width: 2px;
}
#qokuvfeczq .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#qokuvfeczq .gt_first_summary_row {
border-top-style: solid;
border-top-color: #D3D3D3;
}
#qokuvfeczq .gt_first_summary_row.thick {
border-top-width: 2px;
}
#qokuvfeczq .gt_last_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qokuvfeczq .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}
#qokuvfeczq .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}
#qokuvfeczq .gt_last_grand_summary_row_top {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-bottom-style: double;
border-bottom-width: 6px;
border-bottom-color: #D3D3D3;
}
#qokuvfeczq .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}
#qokuvfeczq .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}
#qokuvfeczq .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#qokuvfeczq .gt_footnote {
margin: 0px;
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#qokuvfeczq .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}
#qokuvfeczq .gt_sourcenote {
font-size: 90%;
padding-top: 4px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
}
#qokuvfeczq .gt_left {
text-align: left;
}
#qokuvfeczq .gt_center {
text-align: center;
}
#qokuvfeczq .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}
#qokuvfeczq .gt_font_normal {
font-weight: normal;
}
#qokuvfeczq .gt_font_bold {
font-weight: bold;
}
#qokuvfeczq .gt_font_italic {
font-style: italic;
}
#qokuvfeczq .gt_super {
font-size: 65%;
}
#qokuvfeczq .gt_footnote_marks {
font-size: 75%;
vertical-align: 0.4em;
position: initial;
}
#qokuvfeczq .gt_asterisk {
font-size: 100%;
vertical-align: 0;
}
#qokuvfeczq .gt_indent_1 {
text-indent: 5px;
}
#qokuvfeczq .gt_indent_2 {
text-indent: 10px;
}
#qokuvfeczq .gt_indent_3 {
text-indent: 15px;
}
#qokuvfeczq .gt_indent_4 {
text-indent: 20px;
}
#qokuvfeczq .gt_indent_5 {
text-indent: 25px;
}
#qokuvfeczq .katex-display {
display: inline-flex !important;
margin-bottom: 0.75em !important;
}
#qokuvfeczq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="11" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Updated Bounds for Actual Analyses from SPUTNIK trial</td>
    </tr>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Analysis">Analysis</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Cases">Cases</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="cases">
        <div class="gt_column_spanner">Cases at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="vebound">
        <div class="gt_column_spanner">VE at Bound<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="spend">
        <div class="gt_column_spanner">Error Spending<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="power">
        <div class="gt_column_spanner">Power by VE<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span></div>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Success">Success</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_efficacy">Efficacy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ve_futility">Futility</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="alpha">alpha<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="beta">beta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a65%">65%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a75%">75%</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="a85%">85%</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Analysis" class="gt_row gt_right">1</td>
<td headers="Cases" class="gt_row gt_right">20</td>
<td headers="Success" class="gt_row gt_right">6</td>
<td headers="Futility" class="gt_row gt_right">16</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.86</td>
<td headers="ve_futility" class="gt_row gt_right">−0.33</td>
<td headers="alpha" class="gt_row gt_right">0.0006</td>
<td headers="beta" class="gt_row gt_right">0.0030</td>
<td headers="65%" class="gt_row gt_right">0.05</td>
<td headers="75%" class="gt_row gt_right">0.18</td>
<td headers="85%" class="gt_row gt_right">0.57</td></tr>
    <tr><td headers="Analysis" class="gt_row gt_right">2</td>
<td headers="Cases" class="gt_row gt_right">78</td>
<td headers="Success" class="gt_row gt_right">44</td>
<td headers="Futility" class="gt_row gt_right">45</td>
<td headers="ve_efficacy" class="gt_row gt_right">0.57</td>
<td headers="ve_futility" class="gt_row gt_right">0.55</td>
<td headers="alpha" class="gt_row gt_right">0.0239</td>
<td headers="beta" class="gt_row gt_right">0.0450</td>
<td headers="65%" class="gt_row gt_right">0.85</td>
<td headers="75%" class="gt_row gt_right">0.99</td>
<td headers="85%" class="gt_row gt_right">1.00</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="11"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Experimental case counts; counts between success and futility bounds do not stop trial</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="11"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Exact vaccine efficacy required to cross bound</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="11"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Cumulative spending at each analysis</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="11"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Cumulative power at each analysis by underlying vaccine efficacy</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="11"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> Efficacy spending ignores non-binding futility bound</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>We have provided an extended example to show that a <span class="citation">Chan and Bohidar (1998)</span> exact binomial using
spending function bounds can be derived in a two-step process that
delivers sample size and bounds by 1) deriving a related time-to-event
design using asymptotic methods and then 2) converting to an exact
binomial design. Adjustments were made to target Type I and Type II
error probabilities in the asymptotic approximation to ensure the exact
binomial Type I and Type II error rates were achieved. The method seems
a reasonable and straightforward approach to develop a complete design
that accounts for the impact of enrollment, failure rates dropout rates,
and trial duration.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-ChanBohidar" class="csl-entry">
Chan, Ivan SF, and Norman R Bohidar. 1998. <span>“Exact Power and Sample
Size for Vaccine Efficacy Studies.”</span> <em>Communications in
Statistics-Theory and Methods</em> 27 (6): 1305–22.
</div>
<div id="ref-JTBook" class="csl-entry">
Jennison, Christopher, and Bruce W. Turnbull. 2000. <em>Group Sequential
Methods with Applications to Clinical Trials</em>. Boca Raton, FL:
Chapman; Hall/CRC.
</div>
<div id="ref-LachinFoulkes" class="csl-entry">
Lachin, John M., and Mary A. Foulkes. 1986. <span>“Evaluation of Sample
Size and Power for Analyses of Survival with Allowance for Nonuniform
Patient Entry, Losses to Follow-up, Noncompliance, and
Stratification.”</span> <em>Biometrics</em> 42: 507–19.
</div>
<div id="ref-SPUTNIK2021" class="csl-entry">
Logunov, Denis Y, Inna V Dolzhikova, Dmitry V Shcheblyakov, Amir I
Tukhvatulin, Olga V Zubkova, Alina S Dzharullaeva, Anna V Kovyrshina, et
al. 2021. <span>“Safety and Efficacy of an rAd26 and rAd5 Vector-Based
Heterologous Prime-Boost COVID-19 Vaccine: An Interim Analysis of a
Randomised Controlled Phase 3 Trial in Russia.”</span> <em>The
Lancet</em> 397 (10275): 671–81.
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
