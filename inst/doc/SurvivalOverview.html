<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2021-03-12" />

<title>Overview of design and evaluation of trials with time-to-event outcomes</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Overview of design and evaluation of trials with time-to-event outcomes</h1>
<h4 class="date">2021-03-12</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This article/vignette provides a summary of functions in the <strong><em>gsDesign</em></strong> package supporting design and evaluation of trial designs for time-to-event outcomes. We do not focus on detailed output options, but what numbers summarizing the design are based on. If you are not looking for this level of detail and just want to see how to design a fixed or group sequential design for a time-to-event endpoint, see the vignette <em>Basic time-to-event group sequential design using gsSurv</em>.</p>
<p>The following functions support use of the very straightforward <span class="citation">Schoenfeld (1981)</span> approximation for 2-arm trials:</p>
<ul>
<li><code>nEvents()</code>: number of events to achieve power or power given number of events with no interim analysis.</li>
<li><code>zn2hr()</code>, <code>gsHR()</code> and <code>gsBoundSummary()</code>: approximate the observed hazard ratio (HR) required to achieve a targeted Z-value for a given number of events.</li>
<li><code>hrn2z()</code>: approximate Z-value corresponding to a specified HR and event count.</li>
<li><code>hrz2n()</code>: approximate event count corresponding to a specified HR and Z-value.</li>
</ul>
<p>The above functions do not directly support sample size calculations. This is done with the <span class="citation">Lachin and Foulkes (1986)</span> method. Functions include:</p>
<ul>
<li><code>nSurvival()</code>: Sample size restricted to single enrollment rate; single analysis.</li>
<li><code>nSurv()</code>: More flexible enrollment scenarios; single analysis.</li>
<li><code>gsSurv()</code>: Group sequential design extension of <code>nSurv()</code>.</li>
</ul>
<p>Output for survival design information is supported in various formats:</p>
<ul>
<li><code>gsBoundSummary()</code>: Tabular summary of a design in a data frame.</li>
<li><code>plot.gsDesign()</code>: Various plot summaries of a design.</li>
<li><code>gsHR()</code>: Approximate HR required to cross a bound.</li>
</ul>
</div>
<div id="schoenfeld-approximation-support" class="section level2">
<h2>Schoenfeld approximation support</h2>
<p>We will assume a hazard ratio <span class="math inline">\(\nu &lt; 1\)</span> represents a benefit of experimental treatment over control. We let <span class="math inline">\(\delta = \log\nu\)</span> denote the so-called <em>natural parameter</em> for this case. Asymptotically the distribution of the Cox model estimate <span class="math inline">\(\hat{\delta}\)</span> under the proportional hazards assumption is <span class="math display">\[\hat\delta\sim \hbox{Normal}(\delta=\log\nu, (1+r)^2/nr).\]</span> Using a Cox model to estimate <span class="math inline">\(\delta\)</span>, the Wald test for <span class="math inline">\(\hbox{H_0}: \delta=0\)</span> can be approximated with the asymptotic variance from above as:</p>
<p><span class="math display">\[Z_W\approx \frac{\sqrt {nr}}{1+r}\hat\delta=\frac{\ln(\hat\nu)\sqrt{nr}}{1+r}.\]</span></p>
<p>Also, we know that the Wald test <span class="math inline">\(Z_W\)</span> and a standard normal version of the logrank <span class="math inline">\(Z\)</span> are both asymptotically efficient and therefore asymptotically equivalent. We denote the <em>standardized effect size</em> as</p>
<p><span class="math display">\[\theta = \delta\sqrt r / (1+r)= \log(\nu)\sqrt r / (1+r).\]</span> Letting <span class="math inline">\(\hat\theta = -\sqrt r/(1+r)\hat\delta\)</span> we have <span class="math display">\[ \hat \theta \sim \hbox{Normal}(\theta, 1/ n).\]</span> Thus, the standardized Z version of the logrank is approximately distributed as</p>
<p><span class="math display">\[Z\sim\hbox{Normal}(\sqrt n\theta,1).\]</span> Treatment effect favoring experimental treatment compared to control in this notation corresponds to a hazard ratio <span class="math inline">\(\nu &lt; 1\)</span>, as well as negative values of the standardized effect <span class="math inline">\(\theta\)</span>, natural parameter <span class="math inline">\(\delta\)</span> and standardized Z-test.</p>
<div id="power-and-sample-size-with-nevents" class="section level3">
<h3>Power and sample size with nEvents()</h3>
<p>Based on the above, the power for the logrank test is approximated by</p>
<p><span class="math display">\[P[Z\le z]=\Phi(z -\sqrt n\theta)=\Phi(z- \sqrt{nr}/(1+r)\log\nu).\]</span> Thus, assuming <span class="math inline">\(n=100\)</span> events and <span class="math inline">\(\delta = \log\nu=-\log(.7)\)</span>, and <span class="math inline">\(r=1\)</span> (equal randomization) we approximate power for the logrank test when <span class="math inline">\(\alpha=0.025\)</span> as</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>n &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>hr &lt;-<span class="st"> </span><span class="fl">.7</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>delta &lt;-<span class="st"> </span><span class="kw">log</span>(hr)</span>
<span id="cb1-4"><a href="#cb1-4"></a>alpha &lt;-<span class="st"> </span><span class="fl">.025</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>r &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw">pnorm</span>(<span class="kw">qnorm</span>(alpha) <span class="op">-</span><span class="st"> </span><span class="kw">sqrt</span>(n<span class="op">*</span>r)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>r)<span class="op">*</span>delta)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">#&gt; [1] 0.4299155</span></span></code></pre></div>
<p>We can compute this with <code>gsDesign::nEvents()</code> as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">nEvents</span>(<span class="dt">n=</span>n,<span class="dt">alpha=</span>alpha,<span class="dt">hr=</span>hr,<span class="dt">r=</span>r)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#&gt; [1] 0.4299155</span></span></code></pre></div>
<p>We solve for the number of events <span class="math inline">\(n\)</span> to see how many events are required to obtain a desired power</p>
<p><span class="math display">\[1-\beta=P(Z\ge \Phi^{-1}(1-\alpha))\]</span> with</p>
<p><span class="math display">\[n = \left(\frac{\Phi^{-1} (1-\alpha)+\Phi^{-1}(1-\beta)}{\theta}\right)^2
=\frac{(1+r)^2}{r(\log\nu)^2}\left({\Phi^{-1} (1-\alpha)+\Phi^{-1}(1-\beta)}\right)^2.\]</span> Thus, the approximate number of events required to power for HR=0.7 with <span class="math inline">\(\alpha=0.025\)</span> one-sided and power <span class="math inline">\(1-\beta=0.9\)</span> is</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>beta &lt;-<span class="st"> </span><span class="fl">0.1</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>(<span class="dv">1</span><span class="op">+</span>r)<span class="op">^</span><span class="dv">2</span><span class="op">/</span>r<span class="op">/</span><span class="kw">log</span>(hr)<span class="op">^</span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>((<span class="kw">qnorm</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>alpha) <span class="op">+</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>beta)))<span class="op">^</span><span class="dv">2</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; [1] 330.3779</span></span></code></pre></div>
<p>which, rounding up, matches (with tabular output):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">nEvents</span>(<span class="dt">hr =</span> hr, <span class="dt">alpha =</span> alpha, <span class="dt">beta =</span> beta, <span class="dt">r =</span> <span class="dv">1</span>, <span class="dt">tbl =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">hr</th>
<th align="right">n</th>
<th align="right">alpha</th>
<th align="right">sided</th>
<th align="right">beta</th>
<th align="right">Power</th>
<th align="right">delta</th>
<th align="right">ratio</th>
<th align="right">hr0</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.7</td>
<td align="right">331</td>
<td align="right">0.025</td>
<td align="right">1</td>
<td align="right">0.1</td>
<td align="right">0.9</td>
<td align="right">0.1783375</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.1099299</td>
</tr>
</tbody>
</table>
<p>The notation <code>delta</code> in the above table changes the sign for the standardized treatment effect <span class="math inline">\(\theta\)</span> in the above:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>theta &lt;-<span class="st"> </span>delta <span class="op">*</span><span class="st"> </span><span class="kw">sqrt</span>(r) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>r)</span>
<span id="cb5-2"><a href="#cb5-2"></a>theta</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; [1] -0.1783375</span></span></code></pre></div>
<p>The <code>se</code> in the table is the estimated standard error for the log hazard ratio <span class="math inline">\(\delta=\log\hat\nu\)</span></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>r) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">331</span> <span class="op">*</span><span class="st"> </span>r)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; [1] 0.1099299</span></span></code></pre></div>
</div>
<div id="group-sequential-design" class="section level3">
<h3>Group sequential design</h3>
<p>We can create a group sequential design for the above problem either with <span class="math inline">\(\theta\)</span> or with the fixed design sample size. The parameter <code>delta</code> in <code>gsDesign()</code> corresponds to standardized effect size with sign changed <span class="math inline">\(-\theta\)</span> in notation used above and by <span class="citation">Jennison and Turnbull (2000)</span>, while the natural parameter, <span class="math inline">\(\log(\hbox{HR})\)</span> is in the parameter <code>delta1</code> passed to <code>gsDesign()</code>. The name of the effect size is specified in <code>deltaname</code> and the parameter <code>logdelta = TRUE</code> indicates that <code>delta</code> input needs to be exponentiated to obtain HR in the output below. This example code can be useful in practice. We begin by passing the number of events for a fixed design in the parameter <code>n.fix</code> (continuous, not rounded) to adapt to a group sequential design.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>Schoenfeld &lt;-<span class="st"> </span><span class="kw">gsDesign</span>(<span class="dt">k=</span><span class="dv">2</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                       <span class="dt">n.fix =</span> <span class="kw">nEvents</span>(<span class="dt">hr =</span> hr, <span class="dt">alpha =</span> alpha, <span class="dt">beta =</span> beta, <span class="dt">r =</span> <span class="dv">1</span>),</span>
<span id="cb7-3"><a href="#cb7-3"></a>                       <span class="dt">delta1 =</span> <span class="kw">log</span>(hr))</span>
<span id="cb7-4"><a href="#cb7-4"></a>Schoenfeld <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">  </span><span class="kw">gsBoundSummary</span>(<span class="dt">deltaname =</span> <span class="st">&quot;HR&quot;</span>, <span class="dt">logdelta =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">  </span><span class="kw">kable</span>(<span class="dt">row.names =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Analysis</th>
<th align="left">Value</th>
<th align="right">Efficacy</th>
<th align="right">Futility</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">IA 1: 50%</td>
<td align="left">Z</td>
<td align="right">2.7500</td>
<td align="right">0.4122</td>
</tr>
<tr class="even">
<td align="left">N: 173</td>
<td align="left">p (1-sided)</td>
<td align="right">0.0030</td>
<td align="right">0.3401</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">~HR at bound</td>
<td align="right">0.6577</td>
<td align="right">0.9391</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">P(Cross) if HR=1</td>
<td align="right">0.0030</td>
<td align="right">0.6599</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">P(Cross) if HR=0.7</td>
<td align="right">0.3412</td>
<td align="right">0.0269</td>
</tr>
<tr class="even">
<td align="left">Final</td>
<td align="left">Z</td>
<td align="right">1.9811</td>
<td align="right">1.9811</td>
</tr>
<tr class="odd">
<td align="left">N: 345</td>
<td align="left">p (1-sided)</td>
<td align="right">0.0238</td>
<td align="right">0.0238</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">~HR at bound</td>
<td align="right">0.8078</td>
<td align="right">0.8078</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">P(Cross) if HR=1</td>
<td align="right">0.0239</td>
<td align="right">0.9761</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">P(Cross) if HR=0.7</td>
<td align="right">0.9000</td>
<td align="right">0.1000</td>
</tr>
</tbody>
</table>
</div>
<div id="information-based-design" class="section level3">
<h3>Information based design</h3>
<p>Exactly the same result can be obtained with the following, passing the standardized effect size <code>theta</code> from above to the parameter <code>delta</code> in <code>gsDesign()</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>Schoenfeld &lt;-<span class="st"> </span><span class="kw">gsDesign</span>(<span class="dt">k=</span><span class="dv">2</span>, <span class="dt">delta =</span> <span class="op">-</span>theta, <span class="dt">delta1 =</span> <span class="kw">log</span>(hr))</span></code></pre></div>
<p>We noted above that the asymptotic variance for <span class="math inline">\(\hat\theta\)</span> is <span class="math inline">\(1/n\)</span> which corresponds to statistical information <span class="math inline">\(\mathcal I=n\)</span> for the parameter <span class="math inline">\(\theta\)</span>. Thus, the value</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>Schoenfeld<span class="op">$</span>n.I</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt; [1] 172.2757 344.5514</span></span></code></pre></div>
<p>corresponds both to the number of events and the statistical information for the standardized effect size <span class="math inline">\(\theta\)</span> required to power the trial at the desired level. Note that if you plug in the natural parameter <span class="math inline">\(\delta= -\log\nu &gt; 0\)</span>, then <span class="math inline">\(n.I\)</span> returns the statistical information for the log hazard ratio.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">gsDesign</span>(<span class="dt">k=</span><span class="dv">2</span>, <span class="dt">delta =</span> <span class="op">-</span><span class="kw">log</span>(hr))<span class="op">$</span>n.I</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#&gt; [1] 43.06893 86.13786</span></span></code></pre></div>
<p>The reader may wish to look above to derive the exact relationship between events and statistical information for <span class="math inline">\(\delta\)</span>.</p>
</div>
<div id="approximating-boundary-characteristics" class="section level3">
<h3>Approximating boundary characteristics</h3>
<p>Another application of the <span class="citation">Schoenfeld (1981)</span> method is to approximate boundary characteristics of a design. As noted in the introduction above, we will consider <code>zn2hr()</code>, <code>gsHR()</code> and <code>gsBoundSummary()</code> to approximate the treatment effect required to cross design bounds. <code>zn2hr()</code> is complemented by the functions <code>hrn2z()</code> and <code>hrz2n()</code>. We begin with the basic approximation used across all of these functions in this section and follow with a sub-section with example code to reproduce some of what is in the table above.</p>
<p>We return to the following equation from above:</p>
<p><span class="math display">\[Z\approx Z_W\approx \frac{\sqrt {nr}}{1+r}\hat\delta=\frac{\ln(\hat\nu)\sqrt{nr}}{1+r}.\]</span> By fixing <span class="math inline">\(Z=z, n\)</span> we can solve for <span class="math inline">\(\hat\nu\)</span> from the above:</p>
<p><span class="math display">\[\hat{\nu} = \exp(z(1+r)/\sqrt{rn}).\]</span> By fixing <span class="math inline">\(\hat\nu\)</span> and <span class="math inline">\(z\)</span>, we can solve for the corresponding number of events required: <span class="math display">\[ n = (z(1+r)/\log(\hat{\nu}))^2/r.\]</span></p>
</div>
<div id="examples" class="section level3">
<h3>Examples</h3>
<p>For our first example, we note that the event counts in <code>Schoenfeld</code> are actually continuous numbers that are rounded up in the table:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>Schoenfeld<span class="op">$</span>n.I</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co">#&gt; [1] 172.2757 344.5514</span></span></code></pre></div>
<p>We reproduce the approximate hazard ratios required to cross efficacy bounds using the Schoenfeld approximations above:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">gsHR</span>(<span class="dt">z =</span> Schoenfeld<span class="op">$</span>upper<span class="op">$</span>bound, <span class="co"># Z-values at bound</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>     <span class="dt">i =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,                    <span class="co"># Analysis number</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>     <span class="dt">x =</span> Schoenfeld,             <span class="co"># Group sequential design from above</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>     <span class="dt">ratio =</span> r)                  <span class="co"># Experimental/control randomization ratio</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co">#&gt; [1] 0.6576844 0.8077846</span></span></code></pre></div>
<p>For the following examples, we assume <span class="math inline">\(r=1\)</span>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>r &lt;-<span class="st"> </span><span class="dv">1</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Assuming a Cox model estimate <span class="math inline">\(\hat\nu\)</span> and a corresponding event count, approximately what Z-value (p-value) does this correspond to? We use the first equation above:</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>hr &lt;-<span class="st"> </span><span class="fl">.73</span> <span class="co"># observed hr</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>events &lt;-<span class="st"> </span><span class="dv">125</span> <span class="co"># Events in analysis</span></span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>z &lt;-<span class="st"> </span><span class="kw">log</span>(hr) <span class="op">*</span><span class="st"> </span><span class="kw">sqrt</span>(events<span class="op">*</span>r) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span><span class="op">+</span>r)</span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="kw">c</span>(z, <span class="kw">pnorm</span>(z)) <span class="co"># Z- and p-value</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">#&gt; [1] -1.75928655  0.03926443</span></span></code></pre></div>
<p>We replicate the Z-value with</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">hrn2z</span>(<span class="dt">hr=</span>hr, <span class="dt">n =</span> events, <span class="dt">ratio =</span> r)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&gt; [1] -1.759287</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Assuming an efficacy bound Z-value and event count, approximately what hazard ratio must be observed to cross the bound? We use the second equation above:</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>z &lt;-<span class="st"> </span><span class="kw">qnorm</span>(.<span class="dv">025</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a>events &lt;-<span class="st"> </span><span class="dv">120</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="kw">exp</span>(z <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>r) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(r <span class="op">*</span><span class="st"> </span>events))</span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">#&gt; [1] 0.6991858</span></span></code></pre></div>
<p>We can reproduce this with <code>zn2hr()</code> by switching the sign of <code>z</code> above; note that the default is <code>ratio = 1</code> for all of these functions and often is not specified:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">zn2hr</span>(<span class="dt">z =</span> <span class="op">-</span>z, <span class="dt">n =</span> events,  <span class="dt">ratio =</span> r)</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co">#&gt; [1] 0.6991858</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Finally, if we want an observed hazard ratio <span class="math inline">\(\hat\nu = .8\)</span> to represent a positive result, how many events would be need to observe to achieve a 1-sided p-value of 0.025? assuming 2:1 randomization? We use the third equation above:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>r &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>hr &lt;-<span class="st"> </span><span class="fl">.8</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>z &lt;-<span class="st"> </span><span class="kw">qnorm</span>(.<span class="dv">025</span>)</span>
<span id="cb18-4"><a href="#cb18-4"></a>events &lt;-<span class="st"> </span>(z <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>r) <span class="op">/</span><span class="st"> </span><span class="kw">log</span>(hr))<span class="op">^</span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span>r</span>
<span id="cb18-5"><a href="#cb18-5"></a>events</span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">#&gt; [1] 347.1683</span></span></code></pre></div>
<p>This is replicated with</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">hrz2n</span>(<span class="dt">hr =</span> hr, <span class="dt">z =</span> z, <span class="dt">ratio =</span> r)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co">#&gt; [1] 347.1683</span></span></code></pre></div>
</div>
</div>
<div id="lachin-and-foulkes-design" class="section level2">
<h2>Lachin and Foulkes design</h2>
<p>For the purpose of sample size and power for group sequential design, the <span class="citation">Lachin and Foulkes (1986)</span> is based on substantial evaluation not documented further here. We try to make clear here what some of the strengths and weaknesses of both the <span class="citation">(<span class="citeproc-not-found" data-reference-id="LachinFoules"><strong>???</strong></span>)</span> method as well as its implementation in the <code>gsDesign::nSurv()</code> (fixed design) and <code>gsDesign::gsSurv()</code> (group sequential) functions. For historical and testing purposes, we also discuss use of the less flexible <code>gsDesign::nSurvival()</code> function that was independently programmed and can be used for some limited validations of <code>gsDesign::nSurv()</code>.</p>
<div id="model-assumptions" class="section level3">
<h3>Model assumptions</h3>
<p>Some detail in specification comes With the flexibility allowed by the <span class="citation">Lachin and Foulkes (1986)</span> method. The model assumes</p>
<ul>
<li>A fixed enrollment period with piecewise constant enrollment rates</li>
<li>A fixed minimum follow-up period</li>
<li>Piecewise exponential failure rates for the control group</li>
<li>A single, constant hazard ratio for the experimental group</li>
<li>Piecewise exponential loss-to-follow-up rates</li>
<li>A stratified population</li>
<li>A fixed randomization ratio of experimental to control group assignment</li>
</ul>
<p>Other than the proportional hazards assumption, this allows a great deal of flexibility in trial design assumptions. While <span class="citation">Lachin and Foulkes (1986)</span> adjusts the piecewise constant enrollment rates proportionately to derive a sample size, <code>gsDesign$nSurv()</code> also enables the approach of <span class="citation">Kim and Tsiatis (1990)</span> which fixes enrollment rates and extends the final enrollment rate duration to power the trial; the minimum follow-up period is still assumed this approach. We do not enable the drop-in option proposed in <span class="citation">Lachin and Foulkes (1986)</span>.</p>
<p>The two practical differences the <span class="citation">Lachin and Foulkes (1986)</span> method has from the <span class="citation">Schoenfeld (1981)</span> method are:</p>
<ol style="list-style-type: decimal">
<li>By assuming enrollment, failure and dropout rates the method delivers sample size <span class="math inline">\(N\)</span> as well as events required.</li>
<li>The variance for the log hazard ratio <span class="math inline">\(\hat\delta\)</span> is computed differently and both a null (<span class="math inline">\(\sigma^2_0) and alternate hypothesis (\)</span>^2_1$) variance are incorporated through the formula <span class="math display">\[ N  = \left(\frac{\Phi^{-1}(1-\alpha)\sigma_0 + \Phi^{-1}(1-\beta)\sigma_1}{\delta}\right).\]</span> The null hypothesis is derived by averaging the alternate hypothesis rates, weighting according to the proportion randomized in each group.</li>
</ol>
</div>
<div id="fixed-design" class="section level3">
<h3>Fixed design</h3>
<p>We will use the same hazard ratio 0.7 as for the <span class="citation">Schoenfeld (1981)</span> sample size calculations above. We assume further that the trial will enroll for a constant rate for 12 months, have a control group median of 8 months (exponential failure rate <span class="math inline">\(\lambda = \log(2)/8\)</span>), a dropout rate of 0.001 per month, and 16 months of minimum follow-up. As before, we assume a randomization ratio <span class="math inline">\(r=1\)</span>, one-sided Type I error <span class="math inline">\(\alpha=0.025\)</span>, 90% power which is equivalent to Type II error <span class="math inline">\(\beta=0.1\)</span>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>r &lt;-<span class="st"> </span><span class="dv">1</span>               <span class="co"># Experimental/control randomization ratio</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>alpha &lt;-<span class="st"> </span><span class="fl">0.025</span>       <span class="co"># 1-sided Type I error</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>beta &lt;-<span class="st"> </span><span class="fl">0.1</span>          <span class="co"># Type II error (1 - power)</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>hr &lt;-<span class="st"> </span><span class="fl">0.7</span>            <span class="co"># Hazard ratio (experimental / control)</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>controlMedian &lt;-<span class="st"> </span><span class="dv">8</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>dropoutRate &lt;-<span class="st"> </span><span class="fl">0.001</span> <span class="co"># Exponential dropout rate per time unit</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>enrollDuration &lt;-<span class="st"> </span><span class="dv">12</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>minfup &lt;-<span class="st"> </span><span class="dv">16</span>         <span class="co"># minimum follow-up</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>Nlf &lt;-<span class="st"> </span><span class="kw">nSurv</span>(<span class="dt">lambdaC =</span> <span class="kw">log</span>(<span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>controlMedian,</span>
<span id="cb20-10"><a href="#cb20-10"></a>             <span class="dt">hr =</span> hr,</span>
<span id="cb20-11"><a href="#cb20-11"></a>             <span class="dt">eta =</span> dropoutRate,</span>
<span id="cb20-12"><a href="#cb20-12"></a>             <span class="dt">T =</span> enrollDuration <span class="op">+</span><span class="st"> </span>minfup, <span class="co"># Trial duration</span></span>
<span id="cb20-13"><a href="#cb20-13"></a>             <span class="dt">minfup =</span> minfup,</span>
<span id="cb20-14"><a href="#cb20-14"></a>             <span class="dt">ratio =</span> r,</span>
<span id="cb20-15"><a href="#cb20-15"></a>             <span class="dt">alpha =</span> alpha, </span>
<span id="cb20-16"><a href="#cb20-16"></a>             <span class="dt">beta =</span> beta</span>
<span id="cb20-17"><a href="#cb20-17"></a>      )</span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="kw">cat</span>(<span class="kw">paste</span>(<span class="st">&quot;Sample size: &quot;</span>, <span class="kw">ceiling</span>(Nlf<span class="op">$</span>n), <span class="st">&quot;Events: &quot;</span>, <span class="kw">ceiling</span>(Nlf<span class="op">$</span>d), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb20-19"><a href="#cb20-19"></a><span class="co">#&gt; Sample size:  422 Events:  330</span></span></code></pre></div>
<p>Recall that the <span class="citation">Schoenfeld (1981)</span> method recommended 331 events. The two methods tend to yield very similar event count recommendations, but not the same. Other methods will also differ slightly; see <span class="citation">Lachin and Foulkes (1986)</span>. Sample size recommendations can vary more between methods.</p>
<p>We can get the same result with the <code>nSurvival()</code> routine since only a single enrollment, failure and dropout rate is proposed for this example.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>lambda1 &lt;-<span class="st"> </span><span class="kw">log</span>(<span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>controlMedian</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="kw">nSurvival</span>(</span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="dt">lambda1 =</span> lambda1,</span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="dt">lambda2 =</span> lambda1 <span class="op">*</span><span class="st"> </span>hr,</span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="dt">Ts =</span> enrollDuration <span class="op">+</span><span class="st"> </span>minfup,</span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="dt">Tr =</span> enrollDuration,</span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="dt">eta =</span> dropoutRate,</span>
<span id="cb21-8"><a href="#cb21-8"></a>  <span class="dt">ratio =</span> r,</span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="dt">alpha =</span> alpha,</span>
<span id="cb21-10"><a href="#cb21-10"></a>  <span class="dt">beta =</span> beta</span>
<span id="cb21-11"><a href="#cb21-11"></a>)</span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="co">#&gt; Fixed design, two-arm trial with time-to-event</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="co">#&gt; outcome (Lachin and Foulkes, 1986).</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co">#&gt; Study duration (fixed):          Ts=28</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co">#&gt; Accrual duration (fixed):        Tr=12</span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="co">#&gt; Uniform accrual:              entry=&quot;unif&quot;</span></span>
<span id="cb21-17"><a href="#cb21-17"></a><span class="co">#&gt; Control median:      log(2)/lambda1=8</span></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="co">#&gt; Experimental median: log(2)/lambda2=11.4</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co">#&gt; Censoring median:        log(2)/eta=693.1</span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="co">#&gt; Control failure rate:       lambda1=0.087</span></span>
<span id="cb21-21"><a href="#cb21-21"></a><span class="co">#&gt; Experimental failure rate:  lambda2=0.061</span></span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="co">#&gt; Censoring rate:                 eta=0.001</span></span>
<span id="cb21-23"><a href="#cb21-23"></a><span class="co">#&gt; Power:                 100*(1-beta)=90%</span></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="co">#&gt; Type I error (1-sided):   100*alpha=2.5%</span></span>
<span id="cb21-25"><a href="#cb21-25"></a><span class="co">#&gt; Equal randomization:          ratio=1</span></span>
<span id="cb21-26"><a href="#cb21-26"></a><span class="co">#&gt; Sample size based on hazard ratio=0.7 (type=&quot;rr&quot;)</span></span>
<span id="cb21-27"><a href="#cb21-27"></a><span class="co">#&gt; Sample size (computed):           n=422</span></span>
<span id="cb21-28"><a href="#cb21-28"></a><span class="co">#&gt; Events required (computed): nEvents=330</span></span></code></pre></div>
</div>
<div id="group-sequential-design-1" class="section level3">
<h3>Group sequential design</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>k &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co"># Total number of analyses</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>lfgs &lt;-<span class="st"> </span><span class="kw">gsSurv</span>(<span class="dt">k=</span><span class="dv">2</span>,</span>
<span id="cb22-3"><a href="#cb22-3"></a>             <span class="dt">lambdaC =</span> <span class="kw">log</span>(<span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>controlMedian,</span>
<span id="cb22-4"><a href="#cb22-4"></a>             <span class="dt">hr =</span> hr,</span>
<span id="cb22-5"><a href="#cb22-5"></a>             <span class="dt">eta =</span> dropoutRate,</span>
<span id="cb22-6"><a href="#cb22-6"></a>             <span class="dt">T =</span> enrollDuration <span class="op">+</span><span class="st"> </span>minfup, <span class="co"># Trial duration</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>             <span class="dt">minfup =</span> minfup,</span>
<span id="cb22-8"><a href="#cb22-8"></a>             <span class="dt">ratio =</span> r,</span>
<span id="cb22-9"><a href="#cb22-9"></a>             <span class="dt">alpha =</span> alpha, </span>
<span id="cb22-10"><a href="#cb22-10"></a>             <span class="dt">beta =</span> beta</span>
<span id="cb22-11"><a href="#cb22-11"></a>      )</span>
<span id="cb22-12"><a href="#cb22-12"></a>lfgs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gsBoundSummary</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>(<span class="dt">row.names =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Analysis</th>
<th align="left">Value</th>
<th align="right">Efficacy</th>
<th align="right">Futility</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">IA 1: 50%</td>
<td align="left">Z</td>
<td align="right">2.7500</td>
<td align="right">0.4122</td>
</tr>
<tr class="even">
<td align="left">N: 440</td>
<td align="left">p (1-sided)</td>
<td align="right">0.0030</td>
<td align="right">0.3401</td>
</tr>
<tr class="odd">
<td align="left">Events: 172</td>
<td align="left">~HR at bound</td>
<td align="right">0.6571</td>
<td align="right">0.9390</td>
</tr>
<tr class="even">
<td align="left">Month: 13</td>
<td align="left">P(Cross) if HR=1</td>
<td align="right">0.0030</td>
<td align="right">0.6599</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">P(Cross) if HR=0.7</td>
<td align="right">0.3412</td>
<td align="right">0.0269</td>
</tr>
<tr class="even">
<td align="left">Final</td>
<td align="left">Z</td>
<td align="right">1.9811</td>
<td align="right">1.9811</td>
</tr>
<tr class="odd">
<td align="left">N: 440</td>
<td align="left">p (1-sided)</td>
<td align="right">0.0238</td>
<td align="right">0.0238</td>
</tr>
<tr class="even">
<td align="left">Events: 344</td>
<td align="left">~HR at bound</td>
<td align="right">0.8074</td>
<td align="right">0.8074</td>
</tr>
<tr class="odd">
<td align="left">Month: 28</td>
<td align="left">P(Cross) if HR=1</td>
<td align="right">0.0239</td>
<td align="right">0.9761</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">P(Cross) if HR=0.7</td>
<td align="right">0.9000</td>
<td align="right">0.1000</td>
</tr>
</tbody>
</table>
<p>Although we did not use the <span class="citation">Schoenfeld (1981)</span> for sample size, it is still used for the approximate HR at bound calculation above:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>events &lt;-<span class="st"> </span>lfgs<span class="op">$</span>n.I</span>
<span id="cb23-2"><a href="#cb23-2"></a>z &lt;-<span class="st"> </span>lfgs<span class="op">$</span>upper<span class="op">$</span>bound</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">zn2hr</span>(<span class="dt">z =</span> z, <span class="dt">n =</span> events) <span class="co"># Schoenfeld approximation to HR</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co">#&gt; [1] 0.6571386 0.8074431</span></span></code></pre></div>
</div>
<div id="plotting" class="section level3">
<h3>Plotting</h3>
<p>There are various plots available. The approximate hazard ratios required to cross bounds again use the <span class="citation">Schoenfeld (1981)</span> approximation. For a <strong>ggplot2</strong> version of this plot, use the default <code>base = FALSE</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">plot</span>(lfgs, <span class="dt">pl=</span><span class="st">&quot;hr&quot;</span>, <span class="dt">dgt=</span><span class="dv">4</span>, <span class="dt">base=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="event-accrual" class="section level3">
<h3>Event accrual</h3>
<p>The variance calculations for the Lachin and Foulkes method are mostly determined by expected event accrual under the null and alternate hypotheses. The null hypothesis characterized above is seemingly designed so that event accrual will be similar under each hypothesis. You can see the expected events accrued at each analysis under the alternate hypothesis with:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">Analysis =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, </span>
<span id="cb25-2"><a href="#cb25-2"></a>               <span class="st">`</span><span class="dt">Control events</span><span class="st">`</span> =<span class="st"> </span>lfgs<span class="op">$</span>eDC, </span>
<span id="cb25-3"><a href="#cb25-3"></a>               <span class="st">`</span><span class="dt">Experimental events</span><span class="st">`</span> =<span class="st">  </span>lfgs<span class="op">$</span>eDE) <span class="op">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="st">  </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Analysis</th>
<th align="right">Control events</th>
<th align="right">Experimental events</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">96.82001</td>
<td align="right">74.77511</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">184.06813</td>
<td align="right">159.12213</td>
</tr>
</tbody>
</table>
<p>It is worth noting that if events accrue at the same rate in both the null and alternate hypothesis, then the expected duration of time to achieve the targeted events would be shortened. Keep in mind that there can be many reasons events will accrue at a different rate than in the design plan.</p>
<p>The expected event accrual of events over time for a design can be computed as follows:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>Month &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.025</span>, enrollDuration <span class="op">+</span><span class="st"> </span>minfup, <span class="fl">.025</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">plot</span>(<span class="kw">c</span>(<span class="dv">0</span>,Month), </span>
<span id="cb26-3"><a href="#cb26-3"></a>     <span class="kw">c</span>(<span class="dv">0</span>, <span class="kw">sapply</span>(Month, <span class="cf">function</span>(x){<span class="kw">nEventsIA</span>(<span class="dt">tIA=</span>x, <span class="dt">x =</span> lfgs)})), </span>
<span id="cb26-4"><a href="#cb26-4"></a>     <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">xlab=</span><span class="st">&quot;Month&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Expected events&quot;</span>,</span>
<span id="cb26-5"><a href="#cb26-5"></a>     <span class="dt">main=</span><span class="st">&quot;Expected event accrual over time&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>On the other hand, if you want to know the expected time to accrue 25% of the final events and what the expected enrollment accrual is at that time, you compute using:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>b &lt;-<span class="st"> </span><span class="kw">tEventsIA</span>(<span class="dt">x =</span> lfgs, <span class="dt">timing =</span> <span class="fl">0.25</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="kw">cat</span>(<span class="kw">paste</span>(<span class="st">&quot; Time: &quot;</span>, b<span class="op">$</span>T, </span>
<span id="cb27-3"><a href="#cb27-3"></a>          <span class="st">&quot;</span><span class="ch">\n</span><span class="st"> Expected enrollment:&quot;</span>, b<span class="op">$</span>eNC <span class="op">+</span><span class="st"> </span>b<span class="op">$</span>eNE,</span>
<span id="cb27-4"><a href="#cb27-4"></a>          <span class="st">&quot;</span><span class="ch">\n</span><span class="st"> Expected control events:&quot;</span>, b<span class="op">$</span>eDC,</span>
<span id="cb27-5"><a href="#cb27-5"></a>          <span class="st">&quot;</span><span class="ch">\n</span><span class="st"> Expected experimental events:&quot;</span>, b<span class="op">$</span>eDE, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co">#&gt;  Time:  8.88072854965729 </span></span>
<span id="cb27-7"><a href="#cb27-7"></a><span class="co">#&gt;  Expected enrollment: 325.066468979827 </span></span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="co">#&gt;  Expected control events: 49.0303966242417 </span></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="co">#&gt;  Expected experimental events: 36.7672374839294</span></span></code></pre></div>
<p>For expected accrual of events without a design returned by <code>gsDesign::gsSurv()</code>, see the help file for <code>gsDesign::eEvents()</code>.</p>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-JTBook">
<p>Jennison, Christopher, and Bruce W. Turnbull. 2000. <em>Group Sequential Methods with Applications to Clinical Trials</em>. Boca Raton, FL: Chapman; Hall/CRC.</p>
</div>
<div id="ref-KimTsiatis">
<p>Kim, Kyungmann, and Anastasios A. Tsiatis. 1990. “Study Duration for Clinical Trials with Survival Response and Early Stopping Rule.” <em>Biometrics</em> 46: 81–92.</p>
</div>
<div id="ref-LachinFoulkes">
<p>Lachin, John M., and Mary A. Foulkes. 1986. “Evaluation of Sample Size and Power for Analyses of Survival with Allowance for Nonuniform Patient Entry, Losses to Follow-up, Noncompliance, and Stratification.” <em>Biometrics</em> 42: 507–19.</p>
</div>
<div id="ref-Schoenfeld1981">
<p>Schoenfeld, David. 1981. “The Asymptotic Properties of Nonparametric Tests for Comparing Survival Distributions.” <em>Biometrika</em> 68 (1): 316–19.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
